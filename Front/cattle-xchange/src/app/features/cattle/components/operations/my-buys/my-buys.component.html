<header>
  <app-header></app-header>
</header>
<mat-card>
  <mat-card-content>
    <mat-toolbar color="primary">
      <span>Minhas compras</span>
    </mat-toolbar>

    <table mat-table [dataSource]="cattleBuys" class="mat-elevation-z8">

      <!-- title Column -->
      <ng-container matColumnDef="codBuy">
        <th mat-header-cell *matHeaderCellDef>CÃ³digo da compra</th>
        <td mat-cell *matCellDef="let cattleBuy">{{ cattleBuy.codBuy }}</td>
      </ng-container>

      <!-- dateBuy Column -->
      <ng-container matColumnDef="dateBuy">
        <th mat-header-cell *matHeaderCellDef>Data da compra</th>
        <td mat-cell *matCellDef="let cattleBuy">
          {{ cattleBuy.dateBuy }}
        </td>
      </ng-container>

      <!-- totalValue Column -->
      <ng-container matColumnDef="totalValue">
        <th mat-header-cell *matHeaderCellDef>Valor</th>
        <td mat-cell *matCellDef="let cattleBuy">{{ cattleBuy.totalValue }}</td>
      </ng-container>

      <!-- coluna itemsBuy -->
      <ng-container matColumnDef="itemsBuy">
        <th mat-header-cell *matHeaderCellDef>Itens Comprados</th>
        <td mat-cell *matCellDef="let cattleBuy">
          <div
            *ngFor="let item of cattleBuy.itemsBuy; let i = index"
            class="item-row"
          >
            <div class="item-info">
              <span>{{ item.cattleAdForBuyMinDTO.title }}</span> -
              <span>{{
                item.cattleAdForBuyMinDTO.unitValue
                  | currency : "BRL" : "symbol" : "1.2-2"
              }}</span>
            </div>
            <div class="item-actions">
              <button
                mat-icon-button
                color="primary"
                matTooltip="Editar"
                aria-label="Editar item"
                (click)="onDetails(item.cattleAdForBuyMinDTO.id)"

              >
                <mat-icon>preview</mat-icon>
              </button>
            </div>
          </div>
        </td>
      </ng-container>



      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-card-content>
</mat-card>
